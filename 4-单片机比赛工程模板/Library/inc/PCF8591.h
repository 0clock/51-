/***************************************************************************************************    
工程名称：	AD_LED
功能描述：	向EEPROM连续存储多个字节数据，然后读取出来并在发光二极管上显示,实现流水灯功能。
硬件连接：  用8位杜邦线将J8与J12连接，2位杜邦线分别将P2.0与J15_DS1、P2.1与J15_DS2连接
维护记录：  2011-8-22
***************************************************************************************************/
#ifndef _PCF8591_H_
#define _PCF8591_H_

  #ifndef uchar
	#define uchar unsigned char
  #endif

  #ifndef uint
	#define uint  unsigned int
  #endif

#include"intrins.h"
#include "STC12C5A60S2.H" 

sbit PCF8591_sda=P2^7;          //数据线
sbit PCF8591_scl=P2^6;          //时钟线



 /*********************************************************************************************************
** 函数功能 ：延时函数
** 函数说明 ：利用软件延时，占用CPU，经调试最小单位大约为1us
** 入口参数 ：time:需要延时的时间，单位us
** 出口参数 ：无
*********************************************************************************************************/							   
extern void Delay_Us(uchar n);


//**************************************************************************************************
//启动(SCL为高，SDA由高变为低是一个开始条件)
//**************************************************************************************************
extern void PCF8591_start();  

//**************************************************************************************************
//停止（SCL为高，SDA由低变为高是一个结束条件）
//**************************************************************************************************
extern void PCF8591_stop();  

//**************************************************************************************************
//检测应答(所有的地址和数据字都是以8bit,在第9个时钟周期，从器件发出"0"信号来作为收到一个字的应答信号)
//**************************************************************************************************
extern void PCF8591_checkACK();                   //主器件检测从器件是否返回应答

//**************************************************************************************************
//发送应答(发送方为主器件，接收方为从器件，控制器作为从器件接收完1数据时，发送应答信号
//**************************************************************************************************
extern void PCF8591_sendACK(bit ACK);                   


//**************************************************************************************************
//写一字节
//**************************************************************************************************
extern void PCF8591_send_byte(uchar date);       //写一个8位字


//**************************************************************************************************
//读一字节
//**************************************************************************************************
extern uchar PCF8591_receive_byte();        //读一个8位字



//**************************************************************************************************
//读取AD转换结果数据
//**************************************************************************************************
extern uchar PCF8591_Read_AD(uchar chn);


//**************************************************************************************************
//DA转化函数
//**************************************************************************************************
extern void PCF8591_DAC(uchar temp);



#endif

