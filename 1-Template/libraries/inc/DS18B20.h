/*********************************************************************************************************
** 工程功能 ：温度计DS18B20	头文件
** 工程作者 ：Blue Sky Teams――WCW
** 工程版本 ：V1.0
*********************************************************************************************************/
#ifndef _DS18B20_H_
#define _DS18B20_H_

  #ifndef uchar
	#define uchar unsigned char
  #endif

  #ifndef uint
	#define uint  unsigned int
  #endif

#include"intrins.h"
#include <INTRINS.H>
#include "STC12C5A60S2.H" 

sbit DQ = P1^7;                     //DS18B20的数据口位P1^1

extern uint TPH;                           //存放温度值的高字节
extern uint TPL;                           //存放温度值的低字节
extern float TP;							//存放温度值的十进制数


/*********************************************************************************************************
** 函数功能 ：延时函数
** 函数说明 ：利用软件延时，占用CPU，经调试最小单位大约为1us
** 入口参数 ：time:需要延时的时间，单位us
** 出口参数 ：无
*********************************************************************************************************/
extern void DelayXus(uchar n);


/*********************************************************************************************************
** 函数功能 ：DS18B20复位函数
** 函数说明 ：复位DS18B20,并检测设备是否存在
** 入口参数 ：无
** 出口参数 ：无
*********************************************************************************************************/
extern void DS18B20_Reset();


/*********************************************************************************************************
** 函数功能 ：DS18B20读字节函数
** 函数说明 ：从DS18B20读1字节数据
** 入口参数 ：无
** 出口参数 ：从DS18B20读回的1字节数据
*********************************************************************************************************/
extern uchar DS18B20_ReadByte();


/*********************************************************************************************************
** 函数功能 ：DS18B20写字节函数
** 函数说明 ：向DS18B20写1字节数据
** 入口参数 ：要写入DS18B20的1字节数据
** 出口参数 ：无
*********************************************************************************************************/
extern void DS18B20_WriteByte(uchar dat);


/*********************************************************************************************************
** 函数功能 ：DS18B20开始转化温度数据
** 函数说明 ：到转化结束需要一定时间，否则读取的还是旧数据
** 入口参数 ：
** 出口参数 ：
*********************************************************************************************************/
extern void DS18B20_Start();


/*********************************************************************************************************
** 函数功能 ：读取并计算 DS18B20 的温度
** 函数说明 ：到转化结束需要一定时间，否则读取的还是旧数据
** 入口参数 ：
** 出口参数 ：
*********************************************************************************************************/
extern void DS18B20_End();




#endif


